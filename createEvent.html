<!DOCTYPE html>
<html lang="en">

<head>
    <!-- BOOTSTRAP LINK -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event</title>
</head>

<body onload="displayAllContact()">
    <nav>
        <a href="./index.html">Add Contact</a>
        <a href="./contact.html">View Contact</a>
    </nav>
    <table border="1" id="contactPage">
        <tr>
            <th>S/N</th>
            <th>Full Name</th>
            <th>Phone No</th>
            <th>View</th>
        </tr>
        <tr>
            <td>1</td>
            <td>Ola Yinka</td>
            <td>0816170</td>
            <td><button data-bs-toggle="modal" data-bs-target="#staticBackdrop">View</button></td>
            <td><button id="deleteButton" data-bs-toggle="modal" data-bs-target="#exampleModal">Delete</button></td>
        </tr>
    </table>

    <!-- Button trigger modal -->
    <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
  Launch static backdrop modal
</button> -->

    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">
                        Edit Contact
                    </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="contactDiv">
                    First Name
                    <input type="text" value="" id="contactFirstName" />
                    <br />
                    Last Name
                    <input type="text" value="Olayinka" id="contactLastName" />
                    <br />
                    Company
                    <input type="text" value="Olayinka" id="contactCompany" />
                    <br />
                    Phone
                    <input type="text" value="Olayinka" id="contactPhone" />
                    <br />
                    Email
                    <input type="text" value="Olayinka" id="contactEmail" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Close
                    </button>
                    <button type="button" class="btn btn-primary" id="editButton">
                        Edit Contact
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Button trigger modal -->
    <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Launch demo modal
</button> -->

    <!-- Confirm Delete Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5 text-danger" id="exampleModalLabel">
                        Warning!!!
                    </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this contact?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Close
                    </button>
                    <button type="button" class="btn btn-danger" id="confirmDelete" data-bs-dismiss="modal">
                        Save changes
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    let event = [
        {
            id: 5,
            name: "devfest",
            phone: "0809ja",
            email: "test@gmail.com",
            company: "test company",
            location: "Abuja",
            description: "A tech event hosted by Google.",
            date: "October 1, 2026",
            host: "Google developers",
            img: "https://images.unsplash.com/photo-1575936123452-b67c3203c357?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
            isdone: false
        },
        {
            id: 4,
            name: "devfest",
            phone: "0809ja",
            email: "test@gmail.com",
            company: "test company",
            location: "Abuja",
            description: "A tech event hosted by Google.",
            date: "October 1, 2026",
            host: "Google developers",
            img: "https://images.unsplash.com/photo-1575936123452-b67c3203c357?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
            isdone: false
        }
    ];
    // console.log(event[0])

    function displayAllContact() {
        let contactPage = document.getElementById("contactPage");
        contactPage.innerHTML = `
                                <table border="1" id="contactPage">
                                    <tr>
                                        <th>S/N</th>
                                        <th>Full Name</th>
                                        <th>Phone No</th>
                                        <th>View</th>
                                        <th>Delete</th>
                                    </tr>
                                </table>
                                `;
        // for (let i = 0; i < event.length; i++) {
        //     console.log(event[i].id);

        //     contactPage.innerHTML += `
        //                     <tr>
        //                         <td>${i + 1}</td>
        //                         <td>${event[i].firstName} ${event[i].lastName}</td>
        //                         <td>${event[i].phone}${event[i].id}</td>
        //                         <td><button onclick="showContact("${event[i].id}")" data-bs-toggle="modal" data-bs-target="#staticBackdrop">View</button></td>
        //                         <td><button onclick="jjjjj(${i})" id="deleteButton" data-bs-toggle="modal" data-bs-target="#exampleModal">Delete</button></td>
        //                     </tr>
        //                     `;
        // }

        event.forEach((element, i) => {
            console.log(event[i].id);
            console.log(element);
            contactPage.innerHTML += `
                            <tr>
                                <td>${i + 1}</td>
                                <td>${element.firstName} ${element.lastName}</td>
                                <td>${element.phone}${element.id}</td>
                                <td><button onclick="showContact(${element})" data-bs-toggle="modal" data-bs-target="#staticBackdrop">View</button></td>
                                <td><button onclick="jjjjj(${i})" id="deleteButton" data-bs-toggle="modal" data-bs-target="#exampleModal">Delete</button></td>
                            </tr>
                       `;
        });
    }

    function showContact(singleEvent) {
        console.log("id",singleEvent);
        let contactDiv = document.getElementById("contactDiv");
        let editButton = document.getElementById("editButton");
    //     contactDiv.innerHTML =
    //         `
    //     First Name <input type="text" value="${event.firstName}" id="contactFirstName">
    //     <br>
    //     Last Name <input type="text" value="${event.lastName}" id="contactLastName">
    //     <br>
    //     Company <input type="text" value="${event.company}" id="contactCompany">
    //     <br>
    //     Phone <input type="text" value="${event.phone}" id="contactPhone">
    //     <br>
    //     Email <input type="text" value="${event.email}" id="contactEmail">
    // `;
        // editButton.innerHTML = `<button type="button" class="btn btn-primary" id="editButton" data-bs-dismiss="modal" onclick="shout(${index})">Edit Contact</button>`;
    }


    function shout(index) {
        contactFirstName = document.getElementById("contactFirstName");
        contactLastName = document.getElementById("contactLastName");
        contactCompany = document.getElementById("contactCompany");
        contactPhone = document.getElementById("contactPhone");
        contactEmail = document.getElementById("contactEmail");

        let contactDetails = {
            firstName: contactFirstName.value,
            lastName: contactLastName.value,
            company: contactCompany.value,
            phone: contactPhone.value,
            email: contactEmail.value,
        };
        console.log(contactDetails);
        event.splice(index, 1, contactDetails);
        localStorage.setItem("yinka", JSON.stringify(event));
        displayAllContact();
    }

    function jjjjj(index) {
        let confirmDelete = document.getElementById("confirmDelete");
        confirmDelete.innerHTML = `<button type="button" onclick="deleteContact(${index})" class="btn btn-danger" id="confirmDelete" data-bs-dismiss="modal">Delete</button>`;
    }

    function deleteContact(index) {
        event.splice(index, 1);
        localStorage.setItem("yinka", JSON.stringify(event));
        displayAllContact();
    }

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>

</html>